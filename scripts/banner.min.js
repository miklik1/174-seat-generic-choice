!function(g){function v(e,t){try{if(e.sequence){var a=e.sequence[0<=t?"current":"previous"];if(a){var r=a.getLayer(e.key,5);if(r&&JSON.stringify(r.sources)===JSON.stringify(e.sources))return!0}}}catch(e){}return!1}function e(e){k.trackEventNativeDef("log","error","BANNER"),k.showFallback()}function b(e,t){t=e.getClickTag(t),k.clickThrough(t.url,t.vars)}var k=g.container,f=g.utils||g.utilities,h=function(a){return a?(a.type="ImageLayer",a.sources&&f.each(a.sources,function(e,t){e&&(a.sources[t]={width:e.width,height:e.height,url:e.preview_url||e.thumb_url}),a.params&&(a.params.polite=!1)}),a.excepts&&f.each(a.excepts,function(e,t){e&&(a.excepts[t]=h(e))}),a):null},S=function(e){var t,a,r,c,n,o,i=this;if(i.target&&e.type)switch(i.key){case"BN":switch(e.type){case"set":i.init();break;case"build":if(e.detail)switch(e.detail.key){case"SQ":return function(e,t,a){try{var r=f.getElementsByKey(e,t+"_0")[0];if(r)for(var c,n=1;n<a;n++)document.querySelector("[data-key="+t+"_"+n+"]")||((c=r.cloneNode(!0)).setAttribute("data-key",t+"_"+n),e.appendChild(c))}catch(e){}}(e.detail.parent.getTarget(e.detail.key),e.detail.key,e.detail.data.frames.length),void("debug"===i.root.props.mode.get()&&A.jump&&(e.detail.data.params.play.from=A.frame,f.isEmptyString(A.scope[1])||(e.detail.data.params.pause.after.time=0)));case"BG_VID_0":try{var s=e.detail;s.parent.parent.getLayer("BG_IMG_0",1)||s.parent.parent.getLayer("BG_IMG").addLayer(g.builder.layers.ImageLayer,"BG_IMG_0",h(f.cloneObject(s.data)),S)}catch(e){}return}return;case"init":var d="mode_"+i.props.mode.get();i.addAttr(d,{name:d,global:!0}),"debug"===i.props.mode.get()&&(i.events.mouseover_custom=f.addEventSimple(i.target,"mouseover",function(){i.removeAttr(d)}),i.events.mouseout_custom=f.addEventSimple(i.target,"mouseout",function(){i.addAttr(d,{name:d,global:!0})})),i.load();break;case"load":i.execute("init",!1),!0!==i.inanimate&&-1===["capture","capture-image","capture-gif"].indexOf(i.props.mode.get())||i.addAttr("anim_no"),-1!==["capture","capture-image"].indexOf(i.props.mode.get())&&i.stop(),i.addAttr("ready");break;case"resize":"RxR"===k.NAME&&(i.removeAttr("ready"),i.execute("destroy",!1),i.execute("init",!1),i.addAttr("ready"));break;case"interaction":i.removeAttr("anim_no_dur");break;case"stop":i.interacted||"debug"===i.props.mode.get()||i.addAttr("anim_no_dur"),i.execute("stop",!1,["debug"===i.props.mode.get()||i.interacted]),-1!==["capture","capture-image"].indexOf(i.props.mode.get())&&i.capture({delay:1e3})}break;case"SQ":switch(e.type){case"init":i.playable()&&i.play();break;case"pause":i.root.stop();break;case"change":"default"===i.current.macros.local.SQ_layout?i.parent.removeAttr("SQ_layout_partner"):i.parent.addAttr("SQ_layout_partner"),i.load(),-1!==["capture-video","capture-gif"].indexOf(i.root.props.mode.get())&&1e3<=i.current.params.duration&&i.root.capture({delay:i.current.params.duration/2,duration:i.current.params.duration})}break;default:switch(e.type){case"set":i.addAttr("hidden");break;case"init":switch(i.loadable()&&i.load(),i.key){case"SQ_0":case"SQ_1":case"SQ_2":case"SQ_3":case"SQ_4":case"SQ_5":break;case"CL":var l=i.root.getLayer("SQ",2);l?i.gestures.gesture_custom=new f.GestureListener(i.target,function(e,t,a){var r=-((a.pageX||a.clientX)-(t.pageX||t.clientX));switch((l.current.index>=l.frames.length-1&&r<0||l.current.index<=0&&0<r)&&(r=0),e){case"click":b(i,l.current.clicktag.url),l.pause();break;case"start":l.pause(),l.addAttr("move");break;case"move":l.frames.length;break;case"stop":l.removeAttr("move"),1<l.frames.length&&(r<-50?l.changeNext():50<r&&l.changePrevious())}}):i.events.click_custom=f.addEventSimple(document.body,"click",function(){b(i)})}break;case"parsed":if("MS"===i.key)try{var _=i.macros.local;_.MS_align_auto_h=_.MS_left<-50?"left":50<_.MS_left?"right":"center",_.MS_align_auto_v=_.MS_top<-50?"top":50<_.MS_top?"bottom":"middle"}catch(e){}break;case"enabled":if(i.removeAttr("disabled"),"FG_IMG"===i.key)try{i.layers[0]||i.parent.parent.addAttr(i.key.split("_")[0]+"_empty",{name:i.key.split("_")[0]+"_empty",global:!0})}catch(e){}break;case"load":case"enter":if(i.available()){"debug"===i.root.props.mode.get()&&function(e){try{var t,a=[["MS","TL","DS","PR","BT"]],r=[];for(t in a)-1!==a[t].indexOf(e.key)&&(r=r.concat(a[t]));if(e.key===A.scope[1]||0<r.length&&-1!==r.indexOf(A.scope[1])){if(!e.sequence)return!0;if(e.sequence.current.index===A.frame)return!0}}catch(e){}return!1}(i)&&i.addAttr("debug"),i.addAttr("active"),i.removeAttr("hidden");var u=v(i,-1);switch(f.each(i.getAnims(),function(e,t){var a=e.target,r=e.name,c=a.events.anim_end;c&&f.removeEventSimple(c.target,c.type,c.callback),u&&e.skip?a.addAttr(r+"_skip"):a.removeAttr(r+"_skip"),a.removeAttr(r+"_out"),a.addAttr(r+"_in")}),i.key){case"LG":try{i.root.getLayer("WR",1).addAttr("LG_type_"+i.getMacros().LG_type)}catch(e){}break;case"BG_VID_0":try{i.wrapper.getLayer("BG_IMG_0",1).addAttr("BG_anim_fade_out")}catch(e){}break;case"SQ_0":case"SQ_1":case"SQ_2":case"SQ_3":case"SQ_4":case"SQ_5":try{var p=i.root.getLayer("LG",2),m="default"===i.macros.local.SQ_theme?i.root.getLayer("CV").macros.local.CV_theme:i.macros.local.SQ_theme;f.arrayContains(["_theme_white"],"_theme_"+m)?(p.removeAttr("LG_color_text_white_icon_yellow"),p.addAttr("LG_color_text_blue_icon_yellow")):(f.arrayContains(["_theme_black","_theme_blue"],"_theme_"+m)?p.addAttr("LG_color_text_white_icon_yellow"):p.removeAttr("LG_color_text_white_icon_yellow"),p.removeAttr("LG_color_text_blue_icon_yellow"))}catch(e){}}}break;case"leave":var y=v(i,1);f.each(i.getAnims(),function(e,t){function a(){n&&f.removeEventSimple(n.target,n.type,n.callback)}var r=e.target,c=e.name,n=r.events.anim_end;a(),y&&e.skip?r.addAttr(c+"_skip"):r.removeAttr(c+"_skip"),r.removeAttr(c+"_in"),r.addAttr(c+"_out"),"FG_IMG_0"===i.key||(r.events.anim_end=f.addEventSimple(r.target,function(){var e,t=document.createElement("div"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(void 0!==t.style[e])return a[e]}(),function(){a()}))}),i.removeAttr("active"),i.removeAttr("debug");break;case"empty":i.addAttr("empty");try{switch(i.key){case"MS_TXT_0":t="TL",a="MS";break;case"MS_TXT_1":t="DS",a="MS";break;case"MS_TXT_2":t="PR",a="MS";break;case"MS_TXT_3":t="BT",a="MS"}a&&(r=i.getLayer(a,-3),a&&r.parent.addAttr(t+"_empty",{name:t+"_empty",global:!0}))}catch(e){}break;case"disabled":i.addAttr("disabled");try{switch(i.key){case"LS":case"FG":case"BG":case"MS":case"TL":case"DS":case"PR":case"OL":case"BT":c=n=(o=i).key;break;case"TL_TXT_0":case"DS_TXT_0":case"PR_TXT_0":case"BT_TXT_0":o=i.getLayer(n,-3),c=n=i.key.split("_")[0]}n&&n&&o.parent.addAttr(c+"_disabled",{name:c+"_disabled",global:!0})}catch(e){}}}},A={};k.ready(function(a){f.addEventSimple(window,"error",e),f.addEventSimple(document.body,"error",e),A=a.editor,f.each(["BN"],function(e,t){window[e]=new g.builder.layers.BannerLayer(e,a.banner,S)})})}(tactic);