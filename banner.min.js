!function(u){function l(){var e,t=document.createElement("div"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(void 0!==t.style[e])return a[e]}function m(e,t){try{if(e.sequence){var a=e.sequence[0<=t?"next":"previous"];if(a){var r=a.getLayer(e.key,5);if(r&&JSON.stringify(r.sources)===JSON.stringify(e.sources))return!0}}}catch(e){}return!1}function e(e){y.trackEventNativeDef("log","error","BANNER"),y.showFallback()}var y=u.container,_=u.utils||u.utilities,p=u.builder.timeline,g=function(a){return a?(a.type="ImageLayer",a.sources&&_.each(a.sources,function(e,t){e&&(a.sources[t]={width:e.width,height:e.height,url:e.preview_url||e.thumb_url}),a.params&&(a.params.polite=!1)}),a.excepts&&_.each(a.excepts,function(e,t){e&&(a.excepts[t]=g(e))}),a):null},b=function(e){var n=this;if(n.target&&e.type)switch(n.key){case"BN":case"BN_0":case"BN_1":case"BN_2":case"BN_3":case"BN_4":case"BN_5":switch(e.type){case"set":p.init(),n.init();break;case"build":if(e.detail)switch(e.detail.key){case"SQ":return void function(e,t,a){try{var r=_.getElementsByKey(e,t+"_0")[0];if(r)for(var n=1;n<a;n++){var i=r.cloneNode(!0);i.setAttribute("data-key",t+"_"+n),e.appendChild(i)}}catch(e){}}(e.detail.parent.getTarget(e.detail.key),e.detail.key,e.detail.data.frames.length);case"BG_VID_0":try{var t=e.detail;t.parent.parent.getLayer("BG_IMG_0",1)||t.parent.parent.getLayer("BG_IMG").addLayer(u.builder.layers.ImageLayer,"BG_IMG_0",g(_.cloneObject(t.data)),b)}catch(e){}return;case"BT_TXT_0":try{var a=e.detail.parent.parent;!function(e,t,a,r,n,i){try{var s=_.cloneObject(e.data);s.params.holder=n,s.params.wrapper=i,s.enabled=t.data.enabled,a.addLayer(u.builder.layers.TextLayer,r,s,b)}catch(e){}}(e.detail,a,a.parent.getLayer("MS_TXT",1),"MS_TXT_2","MS_TXT","MS")}catch(e){}return}return;case"init":"debug"===n.mode&&n.addAttrs("mode_debug"),!0!==n.inanimate&&"capture"!==n.mode||n.addAttrs("anim_no"),n.load();break;case"stop":n.addAttrs("anim_no_dur"),n.execute("stop",!1);break;case"resize":"RxR"===y.NAME&&(n.addAttrs("anim_no_dur"),n.execute("destroy"),n.execute("init"),p.requestTimeout(function(){n.stopped||n.removeAttrs("anim_no_dur")},100));break;case"interaction":n.removeAttrs("anim_no_dur");break;case"load":n.execute("init"),n.addAttrs("ready"),"capture"===n.mode&&p.requestTimeout(function(){n.stop(),n.capture()},100);function i(){var e=n.getClickTag(s?s.state:NaN);y.clickThrough(e.url,e.vars)}var s=n.getLayers("SQ")[0];s&&(1<s.frames.length||"debug"===n.root.mode)?_.each(n.getLayers("CL"),function(e){n.events.gesture=new _.GestureListener(e.target,function(e,t,a){switch(e){case"click":i(),s.pause();break;case"start":s.pause();break;case"move":break;case"stop":var r;1<s.frames.length||"debug"===n.root.mode?(r=-((a.pageX||a.clientX)-(t.pageX||t.clientX)))<0?s.changeNext():0<r&&s.changePrevious():i()}})}):n.events.gesture=_.addEventSimple(document.body,"click",i)}break;case"SQ":switch(e.type){case"init":n.load(),n.play();break;case"load":case"play":case"pause":break;case"change":n.load()}break;default:switch(e.type){case"init":n.addAttr("hidden"),n.loadable()&&n.load();break;case"load":case"enter":if(n.available()){switch(n.removeAttr("hidden"),n.key){case"LG_IMG_0":n.addAttr("ready",{name:"ready"});break;case"BG_VID_0":try{n.wrapper.getLayer("BG_IMG_0",1).addAttr("anim_BG_IMG_out",{name:"anim_BG_IMG_out"})}catch(e){}}var r=m(n,-1);p.requestTimeout(function(){_.each(n.getAnims(),function(e,t){r&&e.skip&&e.target.addAttrs(e.name+"_skip"),e.target.addAttrs(e.name+"_in"),e.target.removeAttrs(e.name+"_out")})},0);break}break;case"leave":var c=m(n,1);_.each(n.getAnims(),function(e,t){e.target.removeAttrs(e.name+"_in"),e.target.addAttrs(e.name+"_out"),c&&e.skip&&e.target.removeAttrs(e.name+"_skip")});var d=function(){_.each(n.getAnims(),function(e,t){e.target.removeAttrs(e.name+"_out")}),n.target.removeEventListener(l(),d)};n.target.addEventListener(l(),d);break;case"enabled":n.removeAttrs("empty");break;case"empty":case"disabled":switch(n.addAttrs("empty"),n.key){case"MS":case"BT":var o="empty_"+n.key;n.sequence.frames[n.frame].addAttr(o,{name:o,global:!0});break;case"CN":o="empty_"+n.key;n.root.getLayer("CV").addAttr(o,{name:o,global:!0})}}}};y.ready(function(t){_.addEventSimple(window,"error",e),_.addEventSimple(document.body,"error",e),_.each("Preview"!==y.NAME||""!==y.MEDIA&&"native"!==y.MEDIA&&"tactic"!==y.MEDIA&&"tactic-local-preview"!==y.MEDIA?["BN"]:["BN_0","BN_1","BN_2","BN_3","BN_4","BN_5"],function(e){if("BN"===e||_.getElementsByKey(document.body,e)[0]){window[e]=new u.builder.layers.BannerLayer(e,_.cloneObject(t.banner),b);try{"debug"===window[e].mode&&_.each(window[e].getLayers(t.editor.state[0]),function(e){_.addClass(e.target,"debug")})}catch(e){}}})})}(tactic);